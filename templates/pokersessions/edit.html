{% extends 'base.html' %}

{% block content %}
{% load tz %}
{% load formset_tags %}
{% load static %}
<form method="post">
<div class="form-vertical">
  <h2>PokerSessionEdit</h2>
        {% csrf_token %}
        {{ poker_session_form.as_p }}
</div>
<div id="formset" data-formset-prefix="{{ update_formset.prefix }}">
  {{ update_formset.management_form }}
  <div data-formset-body>
    {% for update_form in update_formset %}
      {% if update_form.errors %}
        <div>{{ update_form.errors }}</div>
      {% endif %}
      <div data-formset-form>
        {% timezone poker_session.location.timezone %}
          {{ update_form.time }}
        {% endtimezone %}
        {{ update_form.chip_stack }}
        {{ update_form.buy_in }}
        <button type="button" data-formset-move-up-button>Move up</button>
        <button type="button" data-formset-move-down-button>Move down</button>
        <button type="button" data-formset-delete-button>Delete form</button>
      </div>
    {% endfor %}
  </div>
</div>
<input type="button" value="Add another" data-formset-add>
<button class='btn' type="submit">Edit Session</button>
</form>
<script type="form-template" data-formset-empty-form>
    {% escapescript %}
        <div data-formset-form>
            {% timezone poker_session.location.timezone %}
              {{ update_form.empty_form.time }}
            {% endtimezone %}
            {{ update_form.empty_form.chip_stack }}
            {{ update_form.empty_form.buy_in }}
            <button type="button" data-formset-move-up-button>Move up</button>
            <button type="button" data-formset-move-down-button>Move down</button>
            <button type="button" data-formset-delete-button>Delete form</button>
        </div>
    {% endescapescript %}
</script>
{% endblock %}

{% block js %}
<script src="{% static "js/jquery.formset.js" %}"></script>
<script>
$(document).ready(function() {
    $("#formset").formset({
        animateForms: false,
        reorderMode: 'dom',
    });
});
</script>
{% endblock %}
